<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trang Bỏ Phiếu</title>

    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  </head>
  <body>
    <!-- Thêm hiệu ứng particles -->
    <div class="particles-container">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      
      <!-- Thêm sao băng -->
      <div class="shooting-star"></div>
      <div class="shooting-star"></div>
      <div class="shooting-star"></div>
      
      <!-- Thêm ngôi sao nhỏ lấp lánh -->
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
      <div class="tiny-star"></div>
    </div>
    
    <!-- Header cố định giống Netflix -->
    <header class="main-header">
      <div class="header-container">
        <div class="logo">
          <a href="index.html">
            <span class="logo-text">BLOCKCHAIN<span class="accent">VOTE</span></span>
          </a>
        </div>
        <nav class="main-nav">
          <ul>
            <li><a href="index.html" class="active">Trang Chủ</a></li>
            <li><a href="admin.html">Giới thiệu</a></li>
            <li><a href="#" id="switchAccountNav"><i class="fas fa-exchange-alt"></i> Đổi Tài Khoản</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Banner hero kiểu Netflix -->
    <section class="hero-banner">
      <div class="hero-content">
        <h1>Hệ Thống Bỏ Phiếu Phi Tập Trung</h1>
        <h2>Trên Blockchain Ethereum</h2>
        <div class="voting-time">
          <i class="fas fa-vote-yea pulse-icon"></i>
          <h3>Tham gia các cuộc bầu cử minh bạch và an toàn</h3>
        </div>
      </div>
      <div class="hero-overlay"></div>
    </section>
    
    <main class="main-content">
      <!-- User Account Info -->
      <section class="account-section">
        <div class="content-container">
          <div class="section-header">
            <h2>
              <i class="fas fa-user-circle"></i>
              Thông Tin Tài Khoản Metamask
            </h2>
          </div>
          <div class="card account-card">
            <div class="card-content">
              <div class="wallet-container">
                <div class="wallet-info">
                  <div class="wallet-label">Địa Chỉ Ví Của Bạn:</div>
                  <p id="accountAddress" class="wallet-address"></p>
                </div>
                <div class="wallet-actions">
                  <button id="switchAccount" class="btn btn-outline">
                    <i class="fas fa-exchange-alt"></i> Chọn Lại Tài Khoản Metamask
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Elections Section (New) -->
      <section class="elections-section">
        <div class="content-container">
          <div class="section-header">
            <h2>
              <i class="fas fa-poll"></i>
              Danh Sách Cuộc Bầu Cử
            </h2>
          </div>
          <div class="card elections-card">
            <div class="card-content">
              <div id="elections-loading" class="loading-indicator">
                <i class="fas fa-spinner fa-spin"></i> Đang tải danh sách cuộc bầu cử...
              </div>
              <div id="no-elections" class="message-box" style="display: none;">
                <div class="message-content">
                  <i class="fas fa-info-circle"></i>
                  <p>Hiện tại chưa có cuộc bầu cử nào đang diễn ra. Vui lòng quay lại sau.</p>
                </div>
              </div>
              <div id="elections-container" class="elections-grid">
                <!-- Danh sách cuộc bầu cử sẽ được thêm vào đây bằng JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Selected Election Section (New) -->
      <section id="selected-election-section" class="selected-election-section" style="display: none;">
        <div class="content-container">
          <div class="section-header">
            <h2>
              <i class="fas fa-check-circle"></i>
              <span id="selected-election-title">Cuộc bầu cử đang chọn</span>
            </h2>
            <div class="election-info">
              <div class="election-time">
                <i class="fas fa-calendar-alt"></i> 
                <span id="selected-election-time">Thời gian: --/--/---- đến --/--/----</span>
              </div>
              <div class="election-status">
                <i class="fas fa-info-circle"></i> 
                <span id="selected-election-status">Trạng thái: ---</span>
              </div>
            </div>
            <div class="election-description" id="selected-election-description">
              <!-- Mô tả cuộc bầu cử -->
            </div>
            <button id="change-election" class="btn btn-outline btn-small">
              <i class="fas fa-exchange-alt"></i> Chọn cuộc bầu cử khác
            </button>
          </div>
        </div>
      </section>
      
      <!-- Candidates Section -->
      <section id="candidates-section" class="candidates-section" style="display: none;">
        <div class="content-container">
          <div class="section-header">
            <h2>
              <i class="fas fa-user-tie"></i>
              Danh Sách Ứng Cử Viên
            </h2>
          </div>
          <div class="card candidates-card">
            <div class="card-content">
              <div class="table-container">
                <table class="table text-center">
                  <thead>
                    <tr>
                      <th>Tên Ứng Cử Viên</th>
                      <th>Đảng Phái</th>
                      <th>Số Phiếu</th>
                      <th>Chọn</th>
                    </tr>
                  </thead>
                  <tbody id="boxCandidate"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Vote Section -->
      <section id="vote-section" class="vote-section" style="display: none;">
        <div class="content-container">
          <div class="section-header">
            <h2>
              <i class="fas fa-vote-yea"></i>
              Bỏ Phiếu Cho Ứng Cử Viên
            </h2>
          </div>
          <div class="card vote-card">
            <div class="card-content" id="vote">
              <div class="vote-instruction">
                <p>Vui lòng chọn một ứng cử viên từ danh sách và nhấn nút bỏ phiếu bên dưới.</p>
              </div>
              <div class="selected-candidate-info" id="selected-candidate-info" style="display: none;">
                <div class="selected-candidate-header">Ứng cử viên đã chọn:</div>
                <div class="selected-candidate-name" id="selected-candidate-name">Chưa chọn</div>
                <div class="selected-candidate-party" id="selected-candidate-party"></div>
              </div>
              <div class="vote-action">
                <button id="voteButton" class="btn btn-primary" disabled>
                  <i class="fas fa-check-circle"></i> Bỏ Phiếu
                </button>
              </div>
              <div id="msg" class="message-box"></div>
              <div id="vote-box" class="vote-box"></div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Voting History Section (New) -->
      <section id="history-section" class="history-section" style="display: none;">
        <div class="content-container">
          <div class="section-header">
            <h2>
              <i class="fas fa-history"></i>
              Lịch Sử Bỏ Phiếu
            </h2>
          </div>
          <div class="card history-card">
            <div class="card-content">
              <div id="history-loading" class="loading-indicator">
                <i class="fas fa-spinner fa-spin"></i> Đang tải lịch sử bỏ phiếu...
              </div>
              <div id="no-history" class="message-box" style="display: none;">
                <div class="message-content">
                  <i class="fas fa-info-circle"></i>
                  <p>Bạn chưa thực hiện bỏ phiếu trong bất kỳ cuộc bầu cử nào.</p>
                </div>
              </div>
              <div class="table-container" id="history-container" style="display: none;">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Thời gian</th>
                      <th>Cuộc bầu cử</th>
                      <th>Ứng cử viên</th>
                      <th>Trạng thái</th>
                    </tr>
                  </thead>
                  <tbody id="history-list">
                    <!-- Lịch sử bỏ phiếu sẽ được thêm vào đây bằng JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    
    <!-- Footer kiểu Netflix -->
    <footer class="main-footer">
      <div class="footer-container">
        <div class="footer-content">
          <div class="footer-column">
            <h4>Giới Thiệu</h4>
            <ul>
              <li><a href="#">Về Chúng Tôi</a></li>
              <li><a href="#">Công Nghệ Blockchain</a></li>
              <li><a href="#">Tính Năng Bảo Mật</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Hỗ Trợ</h4>
            <ul>
              <li><a href="#">Câu Hỏi Thường Gặp</a></li>
              <li><a href="#">Hướng Dẫn Sử Dụng</a></li>
              <li><a href="#">Liên Hệ</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Pháp Lý</h4>
            <ul>
              <li><a href="#">Điều Khoản Sử Dụng</a></li>
              <li><a href="#">Chính Sách Bảo Mật</a></li>
              <li><a href="#">Quy Định Bỏ Phiếu</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Kết Nối</h4>
            <div class="social-links">
              <a href="#"><i class="fab fa-facebook"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-github"></i></a>
              <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 Blockchain Voting System. Tất cả quyền được bảo lưu.</p>
          <p>Powered by Ethereum Blockchain</p>
        </div>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="../dist/app.bundle.js" type="module"></script>
    <script>
      // Thêm chức năng đồng bộ nút đổi tài khoản ở header với nút trong trang
      document.getElementById('switchAccountNav').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('switchAccount').click();
      });
      
      // Thêm chức năng chọn cuộc bầu cử khác
      document.getElementById('change-election').addEventListener('click', function(e) {
        e.preventDefault();
        // Hiển thị lại danh sách cuộc bầu cử
        document.getElementById('selected-election-section').style.display = 'none';
        document.getElementById('candidates-section').style.display = 'none';
        document.getElementById('vote-section').style.display = 'none';
        document.getElementById('history-section').style.display = 'none';
        
        // Hiển thị phần danh sách cuộc bầu cử
        document.querySelector('.elections-section').style.display = 'block';
        
        // Cuộn lên phần danh sách cuộc bầu cử
        document.querySelector('.elections-section').scrollIntoView({behavior: 'smooth'});
      });
    </script>
    
    <!-- Script cho hiệu ứng nền và parallax -->
    <script>
      // Xử lý khi cuộn trang
      window.addEventListener('scroll', function() {
        // Header đổi màu khi cuộn
        const header = document.querySelector('.main-header');
        if (window.scrollY > 100) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
        
        // Hiệu ứng parallax cho particles
        const particles = document.querySelectorAll('.particle');
        const scrollY = window.scrollY;
        
        particles.forEach((particle, index) => {
          const speed = 0.05 + (index * 0.02);
          const yPos = -scrollY * speed;
          particle.style.transform = `translateY(${yPos}px)`;
        });
      });
      
      // Tạo hiệu ứng di chuyển theo chuột
      document.addEventListener('mousemove', function(e) {
        const particles = document.querySelectorAll('.particle');
        const mouseX = e.clientX / window.innerWidth;
        const mouseY = e.clientY / window.innerHeight;
        
        particles.forEach((particle, index) => {
          const offsetX = (mouseX - 0.5) * (20 + index * 5);
          const offsetY = (mouseY - 0.5) * (20 + index * 5);
          
          particle.style.marginLeft = `${offsetX}px`;
          particle.style.marginTop = `${offsetY}px`;
        });
      });
    </script>
  </body>
</html>
